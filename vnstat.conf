# --- vnStat 2.12 Configuration File ---
#
# Configuração otimizada para monitoramento dedicado da interface 'eth0'.
# Comentários revisados para maior clareza e organização.
#
# Para mais detalhes sobre cada parâmetro, consulte: man vnstat.conf
#

################################################################################
# GERAL
################################################################################

# Interface a ser monitorada. Use o nome exato da sua interface de rede.
# Exemplo: eth0, enp3s0, wlan0
Interface "eth0"

# Diretório onde os bancos de dados de tráfego são armazenados.
DatabaseDir "/var/lib/vnstat"

# Localização para formatação de data/hora ('-' para usar a do sistema).
Locale "-"

################################################################################
# FORMATAÇÃO DE SAÍDA (TERMINAL E IMAGEM)
################################################################################

# Formato de data para dias, meses e topo de tráfego.
# Veja 'man date' para os códigos de formatação.
DayFormat   "%d/%m/%Y"        # Ex: 31/07/2025
MonthFormat "%B %Y"           # Ex: Julho 2025
TopFormat   "%d/%m/%Y"        # Ex: 31/07/2025

# Formato do cabeçalho para imagens geradas pelo vnstati.
HeaderFormat "[%d-%m-%Y] - [%H:%M]"

################################################################################
# VISUAL (SAÍDA NO TERMINAL - CLI)
################################################################################

# Modo de exibição de unidades:
# 0 = KB/MB/GB (10^3, 10^6, 10^9) -> Padrão de operadoras
# 1 = KiB/MiB/GiB (2^10, 2^20, 2^30) -> Padrão de sistemas operacionais
UnitMode 1

# Unidade de medida da taxa de transferência:
# 0 = Bytes/s
# 1 = Bits/s (mais comum para velocidades de internet)
RateUnit 1

# Estilo da tabela de saída. '3' é um dos mais completos.
OutputStyle 3

# Caracteres usados nos gráficos de barra do terminal.
RXCharacter     "%"
TXCharacter     ":"
RXHourCharacter "r"
TXHourCharacter "t"

# Controla a visibilidade da estimativa de tráfego.
EstimateVisible 1
EstimateBarVisible 1
EstimateText "Estimativa:"

################################################################################
# RETENÇÃO E CONSULTAS PADRÃO
################################################################################

# Modo de consulta padrão ao executar 'vnstat' sem argumentos.
# 7 = Gráfico por hora (últimas 24h).
QueryMode 7

# Número de entradas a serem exibidas por padrão nas listas.
List5Mins      24   # Últimas 2 horas (24 * 5 min)
ListHours      24   # Últimas 24 horas
ListDays       31   # Último mês
ListMonths     12   # Último ano
ListTop        10   # Top 10 dias

# Período de retenção de dados em cada granularidade.
# '-1' significa reter indefinidamente.
5MinuteHours   48   # Reter dados de 5 min por 48 horas (2 dias)
HourlyDays     4    # Reter dados por hora por 4 dias
DailyDays      -1   # Reter dados diários para sempre
MonthlyMonths  -1   # Reter dados mensais para sempre
YearlyYears    -1   # Reter dados anuais para sempre
TopDayEntries  -1   # Reter lista de Top Dias para sempre

################################################################################
# ATUALIZAÇÃO, DESEMPENHO E LARGURA DE BANDA
################################################################################

# Intervalo em segundos para o daemon (vnstatd) verificar a interface.
# Padrão é 30. Aumentar para 60-70 reduz a carga de CPU.
UpdateInterval 60

# Intervalo em minutos para salvar os dados no disco.
# Um valor maior reduz o desgaste em SSDs.
SaveInterval 30

# Salvar dados imediatamente se o status da interface mudar (ex: desconectar).
SaveOnStatusChange 1

# Tenta detectar a velocidade máxima da interface automaticamente.
BandwidthDetection 1

# Defina a velocidade máxima (em Mbit/s) do seu link para cálculos de %.
# ESSENCIAL: Ajuste '1000' para a velocidade do seu plano (ex: 300, 500, 1000).
MaxBandwidth 1000

# Trata contadores de interface como 64-bit para evitar resets em redes rápidas.
64bitInterfaceCounters 1

# Desativado para não adicionar novas interfaces automaticamente.
AlwaysAddNewInterfaces 0

################################################################################
# LOGS E MANUTENÇÃO
################################################################################

# Nível de log: 0 = desativado, 1 = erros, 2 = daemon + erros.
UseLogging 2
LogFile "/var/log/vnstat/vnstat.log"

# Otimiza o banco de dados na inicialização para remover dados órfãos.
VacuumOnStartup 1

################################################################################
# VNSTATI - CONFIGURAÇÕES DE IMAGEM
################################################################################

# Exibir taxa de transferência (rate) nas imagens horária e de sumário.
HourlyRate 1
SummaryRate 1

# Fundo transparente, ideal para dashboards (ex: Grafana, Homer).
TransparentBg 1

# Usar fontes maiores para melhor legibilidade.
LargeFonts 1

# Escala da imagem gerada (100 = 100%). 200 dobra o tamanho.
ImageScale 150

# --- Paleta de Cores (Tema Escuro) ---
CBackground     "2A2A2A"  # Fundo
CEdge           "2A2A2A"  # Borda
CHeader         "606060"  # Fundo do cabeçalho
CHeaderTitle    "FFFFFF"  # Título no cabeçalho
CHeaderDate     "FFFFFF"  # Data no cabeçalho
CText           "FFFFFF"  # Texto geral
CLine           "B0B0B0"  # Linhas de grade
CLineL          "B0B0B0"  # Linha de grade mais clara (não usada em todos os gráficos)
CRx             "008000"  # Cor do gráfico de Download (Recebido)
CTx             "95aec0"  # Cor do gráfico de Upload (Transmitido)
CRxD            "336b87"  # Cor dos dados de Download na tabela
CTxD            "cbd7e0"  # Cor dos dados de Upload na tabela